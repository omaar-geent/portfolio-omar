<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Omar Gentilin / SAP & Full Stack Portfolio</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

    <div class="container">
        <header>
            <h1>Omar Gentilin</h1>
            <span class="subtitle">SAP ABAP Developer & Full Stack Engineer //</span>
            
            <div style="margin-top: 30px; display: flex; align-items: center; gap: 20px; flex-wrap: wrap;">
                <a href="https://github.com/omaar-geent" target="_blank">[GitHub Repos]</a>
                <a href="https://www.linkedin.com/in/omar-gentilin-36472132b/" target="_blank">[LinkedIn Profile]</a>
                <a href="/docs/Omar_Gentilin_CV.pdf" class="btn-download" target="_blank" download>
                    Download CV ‚Üì
                </a>
            </div>
        </header>

        <section style="margin-top: 80px;">
            <h2>// Career Path</h2>
            
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-date">2025</div>
                    <div class="timeline-content">
                        <h3>SAP ABAP Developer & Analyst</h3>
                        <span class="company">IT Operations Systems</span>
                        <p>Specializzazione nello sviluppo Custom per moduli MM, SD e PP.</p>
                        <ul>
                            <li>Sviluppo <strong>Module Pool</strong> complessi con architettura MVC (PBO/PAI).</li>
                            <li>Reportistica avanzata <strong>ALV Grid</strong> e ottimizzazione performance (<em>FOR ALL ENTRIES</em>, Binary Search).</li>
                            <li>Creazione <strong>Function Modules</strong> (es. <em>Z_FM_REPORTORDER4</em>) per logiche di business riutilizzabili.</li>
                            <li>Analisi tecnica tabelle standard (VBAK, MARA, MCHB) e gestione dizionario dati (SE11).</li>
                        </ul>
                    </div>
                </div>
        
                <div class="timeline-item">
                    <div class="timeline-date">2025 - 2025</div>
                    <div class="timeline-content">
                        <h3>Full Stack Innovation</h3>
                        <span class="company">R&D Personale</span>
                        <p>Integrazione tra sistemi Enterprise e Web Moderno.</p>
                        <ul>
                            <li>Sviluppo Backend in <strong>Node.js</strong> per dashboard IoT in tempo reale.</li>
                            <li>Scripting <strong>Python</strong> per automazione e parsing dati.</li>
                            <li>Deploy cloud su piattaforme PaaS (Render, Heroku).</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section style="margin-top: 80px;">
            <h2>// ABAP Code Cookbook</h2>
            <p style="color: #ccc; margin-bottom: 20px;">
                Snippet di codice ottimizzato per performance su grandi volumi di dati.
                <br><small>Estratto dalla mia Knowledge Base personale.</small>
            </p>

            <div class="code-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                
                <div class="code-card" style="background: #1e1e1e; border: 1px solid #333; padding: 15px; border-radius: 5px;">
                    <h3 style="color: #fff; border-bottom: 1px solid #333; padding-bottom: 10px; margin-top: 0;">
                        ‚ö° Safe FOR ALL ENTRIES
                    </h3>
                    <p style="font-size: 0.8em; color: #888;">
                        Previene l'estrazione dell'intero DB se la tabella driver √® vuota e rimuove i duplicati.
                    </p>
                    <pre style="background: #000; color: #0f0; padding: 10px; overflow-x: auto; font-size: 0.75em; border-left: 3px solid #0f0;">
<code>IF lt_keys IS NOT INITIAL.
  SORT lt_keys BY key_field.
  DELETE ADJACENT DUPLICATES FROM lt_keys COMPARING key_field.

  SELECT * FROM ztable 
    INTO TABLE @lt_result
    FOR ALL ENTRIES IN @lt_keys
    WHERE key_field = @lt_keys-key_field.
ENDIF.</code></pre>
                </div>

                <div class="code-card" style="background: #1e1e1e; border: 1px solid #333; padding: 15px; border-radius: 5px;">
                    <h3 style="color: #fff; border-bottom: 1px solid #333; padding-bottom: 10px; margin-top: 0;">
                        üîç Binary Search Optimization
                    </h3>
                    <p style="font-size: 0.8em; color: #888;">
                        Riduce la complessit√† da O(n) a O(log n) per letture veloci in memoria.
                    </p>
                    <pre style="background: #000; color: #0f0; padding: 10px; overflow-x: auto; font-size: 0.75em; border-left: 3px solid #0f0;">
<code>" 1. Ordinamento fondamentale per la Binary Search
SORT lt_big_table BY key_field.

" 2. Lettura performante
READ TABLE lt_big_table 
     INTO DATA(ls_result)
     WITH KEY key_field = lv_search_value
     BINARY SEARCH.

IF sy-subrc = 0.
  " Record trovato
ENDIF.</code></pre>
                </div>

            </div>
        </section>
<section style="margin-top: 80px;">
            <h2>// The Integration Lab (Node.js + SAP)</h2>
            <p style="color: #ccc; margin-bottom: 20px;">
                Il vero valore aggiunto: usare <strong>Node.js</strong> come strato agile per esporre la complessit√† di SAP al mondo Web.
            </p>

            <div class="code-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                
                <div class="code-card" style="background: #1e1e1e; border: 1px solid #007acc; padding: 15px; border-radius: 5px;">
                    <h3 style="color: #fff; border-bottom: 1px solid #007acc; padding-bottom: 10px; margin-top: 0;">
                        üîó Node.js calling SAP (RFC)
                    </h3>
                    <p style="font-size: 0.8em; color: #888;">
                        Esempio di chiamata asincrona a un Function Module custom usando la libreria <em>node-rfc</em>.
                    </p>
                    <pre style="background: #000; color: #61dafb; padding: 10px; overflow-x: auto; font-size: 0.75em; border-left: 3px solid #007acc;">
<code>const noderfc = require("node-rfc");

// 1. Connessione Non-Blocking al sistema SAP
const client = new noderfc.Client({
    dest: "S4H", user: process.env.SAP_USER, passwd: process.env.SAP_PASSWORD
});

async function getRealTimeStock(matnr) {
    await client.open();
    
    // 2. Chiamata al FM Custom (Z_FM_READ_STOCK)
    const result = await client.call("Z_FM_READ_STOCK", {
        I_MATNR: matnr,
        I_WERKS: "IT01"
    });

    // 3. Risultato JSON pronto per il Frontend
    return {
        material: result.E_MAKTX,
        stock: result.E_LABST
    };
}</code></pre>
                </div>

                <div class="code-card" style="background: #1e1e1e; border: 1px solid #f0db4f; padding: 15px; border-radius: 5px;">
                    <h3 style="color: #fff; border-bottom: 1px solid #f0db4f; padding-bottom: 10px; margin-top: 0;">
                        üöÄ Real-Time Streaming (WebSockets)
                    </h3>
                    <p style="font-size: 0.8em; color: #888;">
                        Streaming dei dati SAP verso una dashboard web senza refresh di pagina.
                    </p>
                    <pre style="background: #000; color: #f0db4f; padding: 10px; overflow-x: auto; font-size: 0.75em; border-left: 3px solid #f0db4f;">
<code>const io = require("socket.io")(server);

// Evento: Quando un muletto scansiona un pacco
io.on("connection", (socket) => {
    
    socket.on("scan_barcode", async (data) => {
        try {
            // Chiede a SAP i dati del materiale
            const sapData = await getRealTimeStock(data.code);
            
            // Push immediato alla Dashboard del Magazziniere
            io.emit("dashboard_update", {
                type: "INBOUND_DELIVERY",
                payload: sapData,
                timestamp: new Date()
            });
        } catch (err) {
            console.error("SAP Connection Error", err);
        }
    });
});</code></pre>
                </div>

            </div>
        </section>
        <section>
            <h2>// Selected Works</h2>
            <div class="project-list">
                <% progetti.forEach(function(p) { %>
                    <a href="/progetto/<%= p.id %>" style="display: block; color: inherit; text-decoration: none;">
                        <div class="project-item">
                            <div>
                                <div class="project-title"><%= p.titolo %></div>
                                <div style="font-size: 0.9em; color: #888; margin-top: 8px;"><%= p.short_desc %></div>
                            </div>
                            <div class="project-tech"><%= p.categoria %></div>
                        </div>
                    </a>
                <% }); %>
            </div>
        </section>

        <section id="contact">
            <h2>// Initialize Contact</h2>
            <form action="https://formspree.io/f/mgvgbkqe" method="POST" class="contact-form">
                <div class="form-row">
                    <label>Codename (Name)</label>
                    <input type="text" name="name" required placeholder="_">
                </div>
                <div class="form-row">
                    <label>Frequency (Email)</label>
                    <input type="email" name="email" required placeholder="_@_._">
                </div>
                <div class="form-row">
                    <label>Payload (Message)</label>
                    <textarea name="message" rows="5" required placeholder="Start typing..."></textarea>
                </div>
                <button type="submit" class="btn-submit">TRANSMIT DATA</button>
            </form>
        </section>

        <footer>
            ¬© 2025 OMAR GENTILIN | SYSTEM ONLINE
        </footer>
    </div>

    <button class="chat-btn-3d" onclick="toggleChat()">ü§ñ</button>

    <div class="chat-widget" id="chatWindow">
        <div class="chat-header">
            <span>OMAR_AI v2.0 (SAP EXPERT)</span>
            <span style="cursor:pointer; font-size: 1.2em;" onclick="toggleChat()">√ó</span>
        </div>
        <div class="chat-body" id="chatBox">
            <div class="msg bot">Ciao! Sono addestrato sul manuale tecnico di Omar. Chiedimi delle sue competenze SAP o Full Stack!</div>
        </div>
        <div class="chat-input">
            <input type="text" id="userInput" placeholder="Es: Come gestisci le performance in ABAP?" onkeypress="if(event.key==='Enter') sendChat()">
            <button onclick="sendChat()">‚Üë</button>
        </div>
    </div>

    <script>
        function toggleChat() {
            const chat = document.getElementById('chatWindow');
            const btn = document.querySelector('.chat-btn-3d');
            
            if (chat.style.display === 'flex') {
                chat.style.display = 'none';
                btn.innerHTML = 'ü§ñ'; 
            } else {
                chat.style.display = 'flex';
                btn.innerHTML = 'üí¨'; 
                setTimeout(() => document.getElementById('userInput').focus(), 100);
            }
        }

        async function sendChat() {
            const input = document.getElementById('userInput');
            const box = document.getElementById('chatBox');
            const text = input.value.trim();
            if(!text) return;

            // Messaggio Utente
            box.innerHTML += `<div class="msg user">${text}</div>`;
            input.value = '';
            box.scrollTop = box.scrollHeight;

            // Indicatore caricamento
            const loading = document.createElement('div');
            loading.className = 'msg bot';
            loading.innerText = 'Analyzing databases...';
            box.appendChild(loading);
            box.scrollTop = box.scrollHeight;

            try {
                const res = await fetch('/api/chat', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({message: text})
                });
                const data = await res.json();
                
                // Rimuovi loading e metti risposta
                box.removeChild(loading);
                box.innerHTML += `<div class="msg bot">${data.reply}</div>`;
                
            } catch(e) {
                loading.innerText = 'Errore di connessione al cervello.';
            }
            box.scrollTop = box.scrollHeight;
        }
    </script>
</body>
</html>