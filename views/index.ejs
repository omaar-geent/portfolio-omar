<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Omar Gentilin / SAP & Full Stack Portfolio</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

    <div class="container">
        <header>
            <h1>Omar Gentilin</h1>
            <span class="subtitle">SAP ABAP Developer & Full Stack Engineer //</span>
            
            <div style="margin-top: 30px; display: flex; align-items: center; gap: 20px;">
                <a href="https://github.com/omaar-geent" target="_blank">[GitHub Repos]</a>
                <a href="https://www.linkedin.com/in/omar-gentilin-36472132b/" target="_blank">[LinkedIn Profile]</a>
                <a href="#" class="btn-download" onclick="alert('Curriculum in arrivo...')">Download CV â†“</a>
            </div>
        </header>

        <section style="margin-top: 80px;">
            <h2>// Career Path</h2>
            
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-date">2021 - PRESENT</div>
                    <div class="timeline-content">
                        <h3>SAP ABAP Developer & Analyst</h3>
                        <span class="company">IT Operations Systems</span>
                        <p>Specializzazione nello sviluppo Custom per moduli MM, SD e PP.</p>
                        <ul>
                            <li>Sviluppo <strong>Module Pool</strong> complessi (es. <em>SAPMZPP_FHR_MOLD</em>) con architettura MVC (PBO/PAI).</li>
                            <li>Reportistica avanzata <strong>ALV Grid</strong> e ottimizzazione performance (<em>FOR ALL ENTRIES</em>, Binary Search).</li>
                            <li>Creazione <strong>Function Modules</strong> (es. <em>Z_FM_REPORTORDER4</em>) per logiche di business riutilizzabili.</li>
                            <li>Analisi tecnica tabelle standard (VBAK, MARA, MCHB) e gestione dizionario dati (SE11).</li>
                        </ul>
                    </div>
                </div>
        
                <div class="timeline-item">
                    <div class="timeline-date">2023 - 2024</div>
                    <div class="timeline-content">
                        <h3>Full Stack Innovation</h3>
                        <span class="company">R&D Personale</span>
                        <p>Integrazione tra sistemi Enterprise e Web Moderno.</p>
                        <ul>
                            <li>Sviluppo Backend in <strong>Node.js</strong> per dashboard IoT in tempo reale.</li>
                            <li>Scripting <strong>Python</strong> per automazione e parsing dati.</li>
                            <li>Deploy cloud su piattaforme PaaS (Render, Heroku).</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h2>// Selected Works</h2>
            <div class="project-list">
                <% progetti.forEach(function(p) { %>
                    <a href="/progetto/<%= p.id %>" style="display: block; color: inherit; text-decoration: none;">
                        <div class="project-item">
                            <div>
                                <div class="project-title"><%= p.titolo %></div>
                                <div style="font-size: 0.9em; color: #888; margin-top: 8px;"><%= p.short_desc %></div>
                            </div>
                            <div class="project-tech"><%= p.categoria %></div>
                        </div>
                    </a>
                <% }); %>
            </div>
        </section>

        <section id="contact">
            <h2>// Initialize Contact</h2>
            <form action="https://formspree.io/f/mgvgbkqe" method="POST" class="contact-form">
                <div class="form-row">
                    <label>Codename (Name)</label>
                    <input type="text" name="name" required placeholder="_">
                </div>
                <div class="form-row">
                    <label>Frequency (Email)</label>
                    <input type="email" name="email" required placeholder="_@_._">
                </div>
                <div class="form-row">
                    <label>Payload (Message)</label>
                    <textarea name="message" rows="5" required placeholder="Start typing..."></textarea>
                </div>
                <button type="submit" class="btn-submit">TRANSMIT DATA</button>
            </form>
        </section>

        <footer>
            Â© 2025 OMAR GENTILIN | SYSTEM ONLINE
        </footer>
    </div>

    <button class="chat-btn-3d" onclick="toggleChat()">ðŸ¤–</button>

    <div class="chat-widget" id="chatWindow">
        <div class="chat-header">
            <span>OMAR_AI v2.0 (SAP EXPERT)</span>
            <span style="cursor:pointer; font-size: 1.2em;" onclick="toggleChat()">Ã—</span>
        </div>
        <div class="chat-body" id="chatBox">
            <div class="msg bot">Ciao! Sono addestrato sul manuale tecnico di Omar. Chiedimi delle sue competenze SAP o Full Stack!</div>
        </div>
        <div class="chat-input">
            <input type="text" id="userInput" placeholder="Es: Come gestisci le performance in ABAP?" onkeypress="if(event.key==='Enter') sendChat()">
            <button onclick="sendChat()">â†‘</button>
        </div>
    </div>

    <script>
        function toggleChat() {
            const chat = document.getElementById('chatWindow');
            const btn = document.querySelector('.chat-btn-3d');
            
            if (chat.style.display === 'flex') {
                chat.style.display = 'none';
                btn.innerHTML = 'ðŸ¤–'; 
            } else {
                chat.style.display = 'flex';
                btn.innerHTML = 'ðŸ’¬'; 
                setTimeout(() => document.getElementById('userInput').focus(), 100);
            }
        }

        async function sendChat() {
            const input = document.getElementById('userInput');
            const box = document.getElementById('chatBox');
            const text = input.value.trim();
            if(!text) return;

            // Messaggio Utente
            box.innerHTML += `<div class="msg user">${text}</div>`;
            input.value = '';
            box.scrollTop = box.scrollHeight;

            // Indicatore caricamento
            const loading = document.createElement('div');
            loading.className = 'msg bot';
            loading.innerText = 'Analyzing databases...';
            box.appendChild(loading);
            box.scrollTop = box.scrollHeight;

            try {
                const res = await fetch('/api/chat', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({message: text})
                });
                const data = await res.json();
                
                // Rimuovi loading e metti risposta
                box.removeChild(loading);
                box.innerHTML += `<div class="msg bot">${data.reply}</div>`;
                
            } catch(e) {
                loading.innerText = 'Errore di connessione al cervello.';
            }
            box.scrollTop = box.scrollHeight;
        }
    </script>
</body>
</html>